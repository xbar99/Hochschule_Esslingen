{\rtf1\ansi\ansicpg1252\deff0\nouicompat{\fonttbl{\f0\fnil\fcharset0 Calibri;}{\f1\fnil Calibri;}{\f2\fnil\fcharset2 Symbol;}}
{\colortbl ;\red155\green0\blue211;\red0\green77\blue187;\red255\green0\blue0;\red247\green150\blue70;\red0\green176\blue80;\red0\green0\blue0;}
{\*\generator Riched20 10.0.19041}\viewkind4\uc1 
\pard{\pntext\f2\'B7\tab}{\*\pn\pnlvlblt\pnf2\pnindent0{\pntxtb\'B7}}\fi-360\li720\sa200\sl276\slmult1\b\f0\fs26\lang7 1. Open a DB2 Command Window. How many instances are available? What is the current instance? How many databases are cataloged in the db2inst1 instance? Obtain the following information for the SAMPLE database: Database name, Database alias name, Directory entry type, Database directory or Node name.\fs22\line\line\fs24 -\b0  How many instances are available: \cf1\b db2ilist\cf0\line - \b0 What is the current instance: \cf1\b db2 get instance\cf0\line - \b0 How many databases are cataloged in the db2inst1 instance: \line\cf1\b db2 list db directory\line\cf0 - \b0 Obtain the following information for the SAMPLE database: \b\line\b0 Database name: \cf2\b SAMPLE\cf0\line\b0 Database alias name: \cf2\b SAMPLE\cf0\line\b0 Directory entry type: \cf2\b Indirect\cf0\b0  (Local)\b\line\b0 Database directory or Node name (local database directory/Verzeichnispfad):\b\line\cf2 /home/db2inst1\cf0\b0\par
{\pntext\f2\'B7\tab}\b\fs26 2. Connect to the database SAMPLE and select from the EMPLOYEE table. Insert another employee into the EMPLOYEE table with your firstname and lastname.\b0\fs24\line\b\line - \b0 Connect to the database SAMPLE and select from the EMPLOYEE table:\b\line\cf1 db2 connect to SAMPLE\line db2 select * from EMPLOYEE\cf0\line - \b0 Insert another employee into the EMPLOYEE table with your firstname and lastname: [\cf3 im interaktiven Modus\cf0 ]\line\cf1\b INSERT INTO employee (EMPNO, FIRSTNME, LASTNAME, EDLEVEL)\line VALUES ('000011', 'Baran', 'Bickici', 10)\line\cf0\b0\line\cf3\b Hinweis\cf0 :\b0\line\b - \b0 der Befehl \cf1\b DESCRIBE TABLE employee \cf0\b0 funktioniert in \b DB2 \b0 und zeigt dir eine \'dcbersicht der Spalten der Tabelle \b EMPLOYEE \b0 an, einschlie\'dflich ihrer \b Datentypen \b0 und ob der \b NOT NULL-Zwang \b0 aktiv ist\line\b => Nulls\b0 : Gibt an, ob die Spalte \b NULL-Werte \b0 erlaubt; wenn hier \b\i No \b0\i0 steht, bedeutet das, dass die Spalte den \b NOT NULL-Zwang \b0 hat\line\b - \b0 Falls eine ausgelassene Spalte den \b NOT NULL-Zwang \b0 hat und keinen Standardwert definiert, tritt ein Fehler auf, da sie einen Wert ben\'f6tigt; \line\b [ \b0 bezogen auf den \b INSERT INTO \b0 Befehl \b ]\par
{\pntext\f2\'B7\tab}\fs26 3. Customize your CLP prompt by using the DB2_CLPPROMPT registry variable. This will show you instance attachment, database connection and user authorization.\fs24\line\line input\b0 : \cf1\b db2set DB2_CLPPROMPT\cf0\line output\b0 : \b\line "\cf2\b0 Variable not set; Explanation: the variable was not set in the profile registry.\cf0 "\b\line\line => \b0 Um den \b Prompt \b0 anzupassen, musst du die \b Umgebungsvariable \i DBL_CLPPROMPT \b0\i0 setzen [\cf3\b im nicht-interaktiven Modus\cf0\b0 ]: \b\line\cf1 db2set DB2_CLPPROMPT="\cf4 (%ia@%i, %da@%d)\cf1 "\cf0\line\cf1 db2set DB2_CLPPROMPT="\cf4 db2 =>\cf1 "\cf0\line\line => Struktur des Prompts\b0\line\b - %ia: \b0 Dies steht f\'fcr den \b Alias der aktuellen Instanz\b0 . Wenn du mit einer spezifischen DB2-Instanz verbunden bist, zeigt \b\i %ia \b0\i0 den Namen dieser Instanz an\line\b - %i: \b0 Dies ist der \b Name der aktuellen Instanz\b0 . Im Gegensatz zu \b\i %ia\b0\i0 , das den Alias anzeigt, gibt \b\i %i \b0\i0 den eigentlichen Namen der DB2-Instanz zur\'fcck\line\b - %da: \b0 Dies steht f\'fcr den \b Alias der aktuell verbundenen Datenbank\b0 . Der Alias ist ein benutzerfreundlicher Name, der der Datenbank zugeordnet ist und oft k\'fcrzer ist als der tats\'e4chliche Name\b\line - %d: \b0 Dies gibt den \b Namen der aktuell verbundenen Datenbank \b0 zur\'fcck. Es handelt sich um den tats\'e4chlichen Namen der Datenbank, mit der du verbunden bist\b\line\line - \b0 Um die Umgebungsvariable \b DB2_CLPPROMPT\b0 , die du gesetzt hast, zur\'fcckzusetzen und den Standardprompt \b "db2 =>" \b0 wiederherzustellen, kannst du einfach den Befehl \cf1\b db2set\cf0\b0  verwenden, um die Variable zu l\'f6schen:\b\line\cf1 db2set DB2_CLPPROMPT=\line\cf0 => \b0 Um zu \'fcberpr\'fcfen, ob \b DB2_CLPPROMPT \b0 gesetzt ist, kann man mit dem Befehl \cf1\b db2set \cf0\b0 die \b aktuell gesetzten \b0 Registry-Variablen anzeigen\b\par
{\pntext\f2\'B7\tab}4. You are now enabling one of your instances for being accessed by a remote client: [\cf2\b0 alle Befehle in \b User \cf3 develop \cf2\b0 angeben!!!\cf0\b ]\line\line - Open another DB2 Command Window and logon as user develop using password Lab-Adm\line\cf1 su - develop\cf0\line\b0 (Instanz \b von einem neuen Terminal \b0 wechseln, wobei \b\i su \b0\i0 f\'fcr "\b switch user\b0 " steht)\b\line\line - Set TCP as communication protocol \line\cf1 db2set DB2COMM=TCPIP\cf0\line\line - Set service db2c_develop to listen on port 26000\line => \cf1 update dbm cfg using SVCENAME db2c_develop\cf0 ; \line\b0 check with \cf1\b get dbm cfg | grep db2c_develop\cf0\line => open /etc/services and add db2c_develop 26000/TCP:\line\cf1 sudo vim /etc/services\cf0\line\line\cf3 => Hinweis\cf0 :\line - \cf2 db2c_develop \cf0\b0 ist ein \b Dienstname;\line - \b0 der \b Dienstname \cf2\b0 db2c_develop \cf0 wird in der Regel in der \b services-Datei \b0 des Betriebssystems definiert, und diese Datei legt fest, \b welcher Port \b0 mit welchem \b Dienstnamen \b0 verkn\'fcpft ist\b\line => \b0 zuerst musst du sicherstellen, dass der \b Dienstname \cf2\b0 db2c_develop \cf0 in der \b services-\cf3 Datei \cf0\b0 definiert ist, die sich normalerweise im \b Verzeichnis /etc \b0 (unter Linux/Unix) befindet; der \b Eintrag \b0 sieht wie folgt aus\cf1 : db2c_develop 26000/tcp\cf0 ;\b\line\b0 diese \b Zeile \b0 in der \b services-\cf3 Datei \cf0\b0 weist das \b Betriebssystem \b0 an, den Dienst \cf2 db2c_develop \cf0 auf \b Port \b0\i 26000 \i0 f\'fcr \b TCP/IP-Verbindungen \b0 zu lauschen\b\line - \-\b0 Nachdem der Eintrag in der services-Datei vorhanden ist, kannst du den \b Befehl \b0 ausf\'fchren: \b db2 update dbm cfg using SVCENAME db2c_develop\line => \b0 dieser \b Befehl \b0 teilt \b DB2 \b0 mit, dass es den \b Dienstnamen \cf2 db2c_develop \cf0\b0 verwenden soll, um \b eingehende Verbindungen \b0 zu \i akzeptieren\b\i0\line - Warum wird der Port nicht direkt angegeben:\line Dienstname \b0 (\cf2 db2c_develop\cf0 ) ist eine Abstraktion, die f\'fcr Anwendungen und Benutzer \i leichter \i0 zu merken ist als eine \b Portnummer\line => \b0 Wenn du den \b Dienstnamen \b0 angibst, muss das \b System \b0 wissen, welcher \b Port \b0 damit verkn\'fcpft ist, und diese \b Zuordnung \b0 erfolgt in \b services-\cf3 Datei \cf0\line\line\cf3 => Hinweis\cf0 :\line - db2c-Dienst\b0 : Die Bezeichnung "\b db2c\b0 " steht f\'fcr "\b Db2 Client\b0 "-Dienst, der auf eingehende \b Client-Verbindungen \b0 wartet\line\b - Portnummer\b0 : Standardm\'e4\'dfig lauscht dieser Dienst auf dem \b Port 50000 \b0 f\'fcr die erste Db2-Instanz; dieser Port kann aber je nach \b Konfiguration \b0 und \b Instanznummer \b0 variieren\line\b - Format: \b0 Der Dienstname ist oft in der Form "\b db2c<Instanzname\b0 >", z. B. db2cdb2inst1, wobei \b db2inst1 \b0 der \b Instanzname \b0 ist\line\b => Beispiel:\line\b0 Wenn die Instanz \b db2inst1 \b0 hei\'dft, w\'e4re der \i zugeh\'f6rige Dienst \b\i0 db2cdb2inst1\b0 , und er w\'fcrde standardm\'e4\'dfig auf Port \b 50000 \b0 lauschen\line\b - Konfiguration:\line => Portnummer \b0 kann in der Db2 \b Konfigurationsdatei \b0 festgelegt und ge\'e4ndert werden, speziell in der \b services-\cf3 Datei \cf2 /etc/services\cf0\line => \b0 Falls \b ein anderer Port/Dienst \b0 verwendet werden muss, kann man dies in der Instanzkonfiguration mit dem \b Befehl \cf1 db2 update dbm cfg using svcename <Dienstname>\cf0\b0  anpassen\b\line\cf3 => Hinweis\cf0 :\line Node-Eintr\'e4ge \b0 in \b Db2 \b0 sind dazu da, die Informationen f\'fcr die \b Verbindung \b0 zu \b einer \cf3 [1] \cf0 bestimmten Instanz \b0 auf einem \b Remote-Server \b0 zu speichern \f1\endash  dabei handelt es sich um eine Kombination aus \b IP-Adresse \b0 (oder Hostname) und \b Portnummer\b0 , die f\f0\'fcr eine bestimmte Instanz konfiguriert ist\line\cf2\b\i Funktionsweise von Node- und Datenbankeintr\'e4gen:\cf0\b0\i0\line\b 1. Node-Eintrag:\b0\line\b - \b0 Ein \b Node-Eintrag \b0 (z. B. CATALOG TCPIP NODE) speichert die \b IP-Adresse \b0 oder den Hostnamen und die \b Portnummer \b0 der remote-Instanz\line\b - \b0 Dieser \b Eintrag \b0 verweist auf eine \b einzige Instanz \cf3 [1] \cf0\b0 auf dem Remote-Server\line\b 2. Datenbankeintr\'e4ge:\b0\line\b - \b0 Um eine Verbindung zu einer \b Datenbank \b0 auf der \b remote-Instanz \b0 herzustellen, m\'fcssen Sie diese \b Datenbank\b0  \cf3\i katalogisieren \cf0\i0 (mit \cf1\b CATALOG DATABASE\cf0\b0 ), und zwar unter \b Bezugnahme \b0 auf den \b\i Node-Eintrag\b0\i0\line\b - \b0 Wenn Sie \b mehrere Datenbanken \b0 in dieser \b Instanz \b0 ansprechen wollen, m\'fcssen Sie jede Datenbank \b einzeln\b0  \cf3\i katalogisieren\cf0\i0 , aber Sie k\'f6nnen alle auf \b denselben Node-Eintrag \b0 verweisen\line\b => Beispiel:\b0\line\b - \b0 Sie haben eine \b Instanz \b0 auf einem Remote-Server \b remote_host \b0 mit Port \b 50000\b0 , auf der \b drei Datenbanken \b0 laufen: \b db1\b0 , \b db2 \b0 und \b db3\b0\line\b - \b0 Zuerst \cf3\i katalogisieren\cf0\i0  Sie den \b Node \b0 f\'fcr die Remote-\b Instanz\b0 :\line\cf1\b db2 catalog tcpip node \cf5 remote_node \cf1 remote \cf5 remote_host \cf1 server \cf5 50000\cf0\b0\line\b - \b0 Anschlie\'dfend \cf3\i katalogisieren \cf0\i0 Sie jede \b Datenbank \b0 auf der Basis dieses \b Node-Eintrags:\line\cf1 db2 catalog database \cf5\b0 db1 \cf1\b as \cf5 remote_db1 \cf1 at node \cf5 remote_node\cf1\line db2 catalog database \cf5\b0 db2 \cf1\b as \cf5 remote_db2 \cf1 at node \cf5 remote_node\cf1\line db2 catalog database \cf5\b0 db3 \cf1\b as \cf5 remote_db3 \cf1 at node \cf5 remote_node\cf0\b0\line\b - \b0 Dadurch verweisen \b\i remote_db1\b0\i0 , \b\i remote_db2 \b0\i0 und \b\i remote_db3 \b0\i0 alle auf \cf3\i denselben \cf0\b\i0 Node \b0 (\cf5 remote_node\cf0 ), der die \b Verbindungsinformationen \b0 zur \b Instanz \cf5\b0 remote_host \cf0 enth\'e4lt\line\b 3. Zusammenfassung:\b0\line\b - Ein Node-Eintrag pro Remote-Instanz: \b0 Sie brauchen \b nur einen \cf3 [1] \cf0 Node-Eintrag\b0 , um eine \b Instanz \b0 auf einem bestimmten Server und Port zu definieren\b\line - Mehrere Datenbanken: \b0 Sie k\'f6nnen dann \cf3\b\i mehrere\cf0\b0\i0  \b Datenbanken\b0 , die auf dieser Instanz laufen, \cf3\i katalogisieren\cf0\i0 , indem Sie sie auf \b denselben Node-Eintrag \b0 verweisen\b\line\cf3 => Hinweis\cf0 :\line - \b0 Wird bei der Erstellung einer Instanz \b automatisch \b0 der \b Dienstname \b0 in der \cf3\b Service\cf0 -Datei \b0 unter \cf2\b /etc \cf0\b0 erg\'e4nzt?\b\line - NEIN, \b0 bei der Erstellung einer \b Instanz \b0 witd der Dienstname \b nicht automatisch \b0 in die Datei \cf2\b /etc/services \cf0\b0 eingetragen\b\line  => \b0 diese \cf2\b Datei \cf0\b0 muss in der Regel \b manuell \b0 oder mithilfe eines \b Skriptes \b0 bearbeitet werden, um den \b Dienstnamen \b0 und den zugeh\'f6rigen \b Port \b0 f\'fcr jede Instanz festzulegen\b\line\line\line - Start instance DEVELOP. Check if it is listening to port 26000\line - \b0 mit dem \b Befehl \b0 die Instanz \i starten\b\i0 : \cf1 db2start\cf0\line - \'fcberpr\'fcfen \b0 mit\b : \cf1 db2 get dbm cfg | grep SVCENAME \cf0\line (\b0 wobei \b SVCENAME \b0 gleich "\cf2 db2c_develop\cf0 " ist\b )\line => \b0 alternativ: \cf1\b sudo vim /etc/services                                             \cf0\b0\i (letzter Eintrag)\b\line\i0\line - Create sample database\line\cf1 db2sampl\cf0\line\line - Configure your firewall to allow inbound communication via TCP port 26000\line\cf1 sudo firewall-cmd --zone=public --add-port=26000/tcp --permanent\line sudo firewall-cmd --reload\line\cf0 => \b0 alternativ\cf1\b : \cf0\line\cf1 sudo iptables -A INPUT -p tcp --dport 26000 -j ACCEPT\cf0\line\cf1 sudo iptables-save > /etc/iptables/rules.v4\cf0\par
{\pntext\f2\'B7\tab}5. Let your classmate catalog your instance and your database by telling him\line your current IP-address, which comes from the title either of your RDP\line window (external ip) or your DB2 Command Window (internal ip). \line See next step how to catalog [ \cf2 SKIPP SEIN VATER \cf0 ]\par
{\pntext\f2\'B7\tab}6. Make your computer a client to access a remote server run by one of your classmates: [\cf2\b0 alle Befehle in \b User \cf3 db2inst1 \cf2\b0 angeben!!!\cf0\b ]\line\line - Use your DB2 Command Window you previously logged on as \cf3 db2inst1\cf0 .\line\cf1 su - \cf3 db2inst1\cf0\line\line - Catalog a TCPIP node. Use TCPIP as protocol, ask one of your classmates for his IP-address as hostname, the port number of his develop instance, use DEVELOP as instance name, and omit other optional clauses. \line Name this node entry RMTNODE.\line\cf1 db2 catalog tcpip node \cf5 RMTNODE \cf1 remote \cf5 <IP-Adresse> \cf1 server \cf5 26000\cf0\line - \b0 Ersetze \cf5 <IP-Adresse> \cf0 mit der \b IP-Adresse\b0 , die du von deinem Klassenkameraden erhalten hast\b\line - \b0 Um sicherzustellen, dass der \b Knoten \b0 erfolgreich \b katalogisiert \b0 wurde, kannst du den folgenden \b Befehl \b0 verwenden: \cf1\b db2 list node directory\cf0\line => \b0 dies zeigt dir alle \b katalogisierten Knoten \b0 an, einschlie\'dflich des neu hinzugef\'fcgten Knotens \b RMTNODE\line\line Catalog the remote database SAMPLE. Use RMTSAMP as database alias,\line RMTNODE as node name, SERVER as authentication type, and omit other optional clauses\line\cf1 db2 catalog db \cf3 SAMPLE \cf1 as \cf5 RMTSAMP \cf1 at node RMTNODE\line\cf0 => \cf6\b0 Hier gibst du den \cf3\b Namen \cf6\b0 oder \cf5\b Alias \cf6\b0 der \b Datenbank \b0 an, die du erreichen m\'f6chtest\cf1\b\line\cf0 => \b0 Um sicherzustellen, dass die \b Datenbank \b0 erfolgreich \b katalogisiert \b0 wurde, kannst du den folgenden Befehl verwenden: \cf1\b db2 list database directory\cf0 ;\line\b0 dies zeigt dir alle katalogisierten Datenbanken an, einschlie\'dflich der neu hinzugef\'fcgten Datenbank mit dem \b Alias RMTSAMP\par
{\pntext\f2\'B7\tab}7. Examine the node and database directories, for each instance separately. \line\cf1 db2 list db directory \line db2 list node directory\cf0\par
{\pntext\f2\'B7\tab}8. Connect to the remote RMTSAMP database as user develop. Select all rows from the EMPLOYEE table. Show the proof that you really see the remote EMPLOYEE table of your classmate instead of yours. Insert another\line employee into your classmate\rquote s EMPLOYEE table with your firstname and\line lastname. [\cf2\b0 alle Befehle in \b User \cf3 db2inst1 \cf2\b0 angeben!!!\cf0\b ]\line - \b0 Verwende den folgenden \b Befehl\b0 , um eine Verbindung zur Datenbank \b RMTSAMP \b0 als Benutzer \b develop \b0 herzustellen:\b\line\cf1 db2 connect to RMTSAMP user develop using Lab-Adm\line\cf0 => \b0 dieser Befehl stellt die Verbindung zur \b katalogisierten Remote-Datenbank RMTSAMP\b0  her, bei der es sich um die \b SAMPLE\b0 -Datenbank deines Klassenkameraden handelt\cf1\b\line\cf0 - \b0 F\'fcge einen neuen Mitarbeiter mit deinem Vornamen und Nachnamen in die Tabelle deines Klassenkameraden ein [\cf3 im interaktiven Modus\cf0 ]:\line\cf1\b INSERT INTO employee (EMPNO, FIRSTNME, LASTNAME, EDLEVEL)\line VALUES ('110000', 'Baran2', 'Bickici2', 20)\cf0\par
{\pntext\f2\'B7\tab}9. Open a second DB2 Command Window. Let user su connect to your \cf3 local SAMPLE database\cf0  using Lab2-Usr as password. Get a list of all tables\line\cf1 db2 connect to sample user Su using Lab2-Usr\line db2 list tables\par
{\pntext\f2\'B7\tab}\cf0 10. Open a third DB2 Command Window. Let user bob connect to your \cf3 classmate\rquote s remote\cf0  RMTSAMP database using Lab2-Usr as password. Get a list of all tables.\line\cf1 db2 connect to RMTSAMP user Bob using Lab2-Usr \line db2 list tables\cf0\par
{\pntext\f2\'B7\tab}11. Switch back to your first DB2 Command Window. List out all connections to the current instance \cf3 db2inst1\cf0 . Which applications do you expect to be connected, which ones are missing, why are they missing?\line - \b0 mit dem Befehl:\b  db2 list applications\line => \b0 ... zeigt \b alle aktiven Verbindungen \b0 (Anwendungen) zur aktuellen Instanz an, die in deinem Fall \cf3\b db2inst1 \cf0\b0 ist\b\line - \b0 only \b Su \b0 connection gets listed because all other connection are either connected to \b DEVELOP \b0 (classmates connection) or connected to remote database (Bob)\b\par
{\pntext\f2\'B7\tab}12. Attach to node RMTNODE. List out all the connections to RMTNODE.\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line\line d\par
}
 